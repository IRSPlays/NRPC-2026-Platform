(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9441:function(e,t,s){Promise.resolve().then(s.bind(s,6911))},6911:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(3827),n=s(4090),r=s(7326),o=s(933),l=s(5032),c=s(695),i=s(5431),d=s(1652),x=s(699),m=s(3276),p=s(834),h=s(3051),u=s(764),b=s(1524),f=s(4715),y=s(3107);function g(){let[e,t]=(0,n.useState)(!1),[s,g]=(0,n.useState)(""),[v,N]=(0,n.useState)(""),[w,j]=(0,n.useState)({url:"",key:""}),[k,S]=(0,n.useState)([]),[C,E]=(0,n.useState)(!1),[Z,_]=(0,n.useState)(!1),[A,O]=(0,n.useState)(null),[I,L]=(0,n.useState)({text:"",type:""});(0,n.useEffect)(()=>{"true"===sessionStorage.getItem("nrpc_local_auth")&&(t(!0),T())},[]),(0,n.useEffect)(()=>{e&&P()},[e]);let R=async e=>{e.preventDefault();try{(await y.Z.post("/api/auth",{code:s})).data.success&&(t(!0),sessionStorage.setItem("nrpc_local_auth","true"),T())}catch(e){N("Access Denied")}},T=()=>{let e=localStorage.getItem("nrpc_backup_config");e&&j(JSON.parse(e))},P=async()=>{E(!0);try{let e=await y.Z.get("/api/archives");Array.isArray(e.data)?S(e.data):(console.error("Unexpected API response:",e.data),L({text:"API Error: Invalid response format",type:"error"}),S([]))}catch(s){var e,t;console.error(s),L({text:"Listing Error: "+((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||s.message),type:"error"})}finally{E(!1)}},U=async()=>{if(!w.url||!w.key)return alert("Configure server first");_(!0),L({text:"",type:""});try{let e=await y.Z.post("/api/sync",w);L({text:"Sync Complete: "+e.data.message,type:"success"}),P()}catch(s){var e,t;L({text:"Sync Error: "+((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.error)||s.message),type:"error"})}finally{_(!1)}},B=async e=>{let t=e.toLowerCase().endsWith(".zip");if(confirm("EMERGENCY PROTOCOL: \n\nAre you sure you want to OVERWRITE the live server with ".concat(e,"?\nType: ").concat(t?"FULL SYSTEM (Database + Uploads)":"DATABASE ONLY (JSON)","\n\nThis cannot be undone."))){O(e),L({text:"",type:""});try{await y.Z.post("/api/restore",{...w,filename:e}),L({text:"System Restored Successfully. Live server state updated.",type:"success"})}catch(e){var s,a;L({text:"Restore Error: "+((null===(a=e.response)||void 0===a?void 0:null===(s=a.data)||void 0===s?void 0:s.error)||e.message),type:"error"})}finally{O(null)}}},D=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB"][t]};return e?(0,a.jsxs)("main",{className:"min-h-screen bg-neo-void text-neo-slate p-8 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"scanning-line absolute inset-0 opacity-20 pointer-events-none"}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8 relative z-10",children:[(0,a.jsxs)("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 pb-8 border-b border-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-neo-cyan/10 rounded-2xl border border-neo-cyan/30 flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-8 h-8 text-neo-cyan"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-heading font-black text-white uppercase tracking-tighter",children:["Command ",(0,a.jsx)("span",{className:"text-neo-cyan neo-text-glow",children:"Center"})]}),(0,a.jsxs)("p",{className:"text-xs font-mono text-neo-slate/60 uppercase tracking-[0.3em] mt-2 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Off-Site Satellite Uplink // Localhost"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2 bg-neo-cyan/5 border border-neo-cyan/20 rounded-lg",children:[(0,a.jsx)(l.Z,{className:"w-4 h-4 text-neo-cyan"}),(0,a.jsx)("span",{className:"text-xs font-mono font-bold text-neo-cyan uppercase tracking-widest",children:"System Online"})]}),(0,a.jsx)("button",{onClick:()=>{t(!1),sessionStorage.removeItem("nrpc_local_auth")},className:"px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs font-mono text-neo-slate/60 hover:text-white transition-colors",children:"LOGOUT"})]})]}),I.text&&(0,a.jsx)("div",{className:"p-4 rounded-xl font-mono text-xs uppercase tracking-widest border ".concat("success"===I.type?"bg-neo-cyan/10 border-neo-cyan/30 text-neo-cyan":"bg-neo-amber/10 border-neo-amber/30 text-neo-amber"),children:I.text}),(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("section",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"neo-glass rounded-[2rem] border-white/5 p-8 relative overflow-hidden group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-neo-cyan"}),(0,a.jsx)("h2",{className:"text-sm font-mono font-bold text-white uppercase tracking-[0.2em]",children:"Uplink Configuration"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-mono text-neo-slate/40 uppercase tracking-widest ml-2",children:"Server Endpoint"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-neo-slate/30"}),(0,a.jsx)("input",{type:"text",value:w.url,onChange:e=>j({...w,url:e.target.value}),placeholder:"https://your-platform.railway.app",className:"w-full bg-neo-void/50 border border-white/10 rounded-xl py-4 pl-12 pr-6 text-white font-mono text-sm focus:border-neo-cyan/40 outline-none transition-all"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-mono text-neo-slate/40 uppercase tracking-widest ml-2",children:"Secret Key"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-neo-slate/30"}),(0,a.jsx)("input",{type:"password",value:w.key,onChange:e=>j({...w,key:e.target.value}),placeholder:"BACKUP_SECRET_KEY",className:"w-full bg-neo-void/50 border border-white/10 rounded-xl py-4 pl-12 pr-6 text-white font-mono text-sm focus:border-neo-cyan/40 outline-none transition-all"})]})]})]}),(0,a.jsxs)("button",{onClick:()=>{localStorage.setItem("nrpc_backup_config",JSON.stringify(w)),L({text:"Configuration saved locally",type:"success"}),setTimeout(()=>L({text:"",type:""}),3e3)},className:"w-full py-4 bg-white/5 hover:bg-white/10 border border-white/10 rounded-xl text-xs font-mono font-bold text-white uppercase tracking-widest flex items-center justify-center gap-2 transition-all",children:[(0,a.jsx)(x.Z,{className:"w-4 h-4"})," Save Local Credentials"]})]})]}),(0,a.jsxs)("div",{className:"neo-glass rounded-[2rem] border-white/5 overflow-hidden",children:[(0,a.jsxs)("div",{className:"px-8 py-6 border-b border-white/5 flex items-center justify-between bg-white/[0.02]",children:[(0,a.jsxs)("h2",{className:"text-sm font-mono font-bold text-white uppercase tracking-[0.2em] flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4 text-neo-cyan"}),"Local Archives"]}),(0,a.jsx)("button",{onClick:P,disabled:C,className:"p-2 bg-white/5 rounded-lg hover:bg-neo-cyan/10 hover:text-neo-cyan transition-all disabled:opacity-30",children:(0,a.jsx)(p.Z,{className:"w-4 h-4 ".concat(C?"animate-spin":"")})})]}),(0,a.jsx)("div",{className:"divide-y divide-white/5",children:0===k.length?(0,a.jsx)("div",{className:"p-12 text-center text-neo-slate/30 font-mono text-xs uppercase tracking-widest",children:C?"Scanning drive...":"No archives found on local drive"}):k.map(e=>(0,a.jsxs)("div",{className:"p-6 hover:bg-white/[0.02] transition-colors flex items-center justify-between group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center border ".concat(e.name.endsWith(".zip")?"bg-neo-cyan/5 border-neo-cyan/20 text-neo-cyan":"bg-neo-amber/5 border-neo-amber/20 text-neo-amber"),children:e.name.endsWith(".zip")?(0,a.jsx)(h.Z,{className:"w-6 h-6"}):(0,a.jsx)(u.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-bold text-white font-mono",children:e.name}),(0,a.jsxs)("div",{className:"text-[10px] font-mono text-neo-slate/40 uppercase mt-1",children:[new Date(e.date).toLocaleString("en-SG")," • ",D(e.size)]})]})]}),(0,a.jsxs)("button",{onClick:()=>B(e.name),disabled:!!A,className:"opacity-0 group-hover:opacity-100 py-2.5 px-5 bg-neo-amber/10 border border-neo-amber/30 text-neo-amber hover:bg-neo-amber hover:text-neo-void rounded-xl text-[10px] font-mono font-bold uppercase tracking-widest transition-all flex items-center gap-2",children:[A===e.name?(0,a.jsx)(p.Z,{className:"animate-spin w-3 h-3"}):(0,a.jsx)(b.Z,{className:"w-3 h-3"}),A===e.name?"UPLOADING...":"RESTORE"]})]},e.name))})]})]}),(0,a.jsxs)("section",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"neo-glass rounded-[2rem] border-neo-cyan/20 p-8 text-center relative overflow-hidden group",children:[(0,a.jsx)("div",{className:"scanning-line absolute w-full top-0 left-0 opacity-10"}),(0,a.jsx)("div",{className:"w-24 h-24 bg-neo-cyan/10 rounded-full border border-neo-cyan/30 flex items-center justify-center mx-auto mb-8 group-hover:scale-110 transition-transform duration-500",children:(0,a.jsx)(i.Z,{className:"w-10 h-10 text-neo-cyan"})}),(0,a.jsxs)("h2",{className:"text-2xl font-heading font-black text-white uppercase tracking-tight mb-2",children:["Sync ",(0,a.jsx)("span",{className:"text-neo-cyan",children:"Protocol"})]}),(0,a.jsx)("p",{className:"text-xs font-mono text-neo-slate/60 mb-8 leading-relaxed",children:"Download latest system snapshot from live server. Includes database and all uploads."}),(0,a.jsxs)("button",{onClick:U,disabled:Z,className:"w-full btn-neo py-5 flex items-center justify-center gap-3 disabled:opacity-50 text-sm",children:[Z?(0,a.jsx)(p.Z,{className:"animate-spin w-5 h-5"}):(0,a.jsx)(f.Z,{className:"w-5 h-5"}),Z?"TRANSFERRING...":"INITIATE SYNC"]})]}),(0,a.jsxs)("div",{className:"p-6 rounded-2xl bg-neo-amber/5 border border-neo-amber/20 flex gap-4",children:[(0,a.jsx)(b.Z,{className:"w-6 h-6 text-neo-amber shrink-0"}),(0,a.jsxs)("div",{className:"text-[10px] font-mono uppercase tracking-wider space-y-2",children:[(0,a.jsx)("span",{className:"text-neo-amber font-bold block",children:"Caution"}),(0,a.jsx)("p",{className:"text-neo-slate/60 leading-relaxed",children:"Restoration protocol is destructive. Live server data will be completely replaced by the selected archive."})]})]})]})]})]})]}):(0,a.jsxs)("main",{className:"min-h-screen bg-neo-void flex items-center justify-center p-4 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"scanning-line absolute inset-0 opacity-20 pointer-events-none"}),(0,a.jsxs)("div",{className:"w-full max-w-md neo-glass rounded-[2rem] border-neo-cyan/20 p-10 relative z-10 shadow-[0_0_50px_rgba(102,252,241,0.1)]",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-neo-cyan/10 rounded-2xl border border-neo-cyan/30 flex items-center justify-center mx-auto mb-6 animate-pulse-slow",children:(0,a.jsx)(r.Z,{className:"w-10 h-10 text-neo-cyan"})}),(0,a.jsxs)("h1",{className:"text-2xl font-heading font-black text-white uppercase tracking-tight",children:["Secure ",(0,a.jsx)("span",{className:"text-neo-cyan neo-text-glow",children:"Gateway"})]}),(0,a.jsx)("p",{className:"text-[10px] font-mono text-neo-slate/60 uppercase tracking-[0.3em] mt-2",children:"NRPC Command Center Access"})]}),(0,a.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-mono text-neo-slate/40 uppercase tracking-widest ml-2",children:"Access Code"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neo-slate/40"}),(0,a.jsx)("input",{type:"password",value:s,onChange:e=>g(e.target.value),className:"w-full bg-neo-void/50 border border-white/10 rounded-xl py-4 pl-12 pr-4 text-white font-mono text-center tracking-[0.5em] focus:border-neo-cyan/50 outline-none transition-all",placeholder:"••••••",autoFocus:!0})]})]}),v&&(0,a.jsx)("div",{className:"p-3 bg-neo-amber/10 border border-neo-amber/30 text-neo-amber text-xs font-mono text-center uppercase tracking-wider rounded-lg",children:v}),(0,a.jsx)("button",{type:"submit",className:"w-full btn-neo py-4 text-sm",children:"Authenticate"})]})]})]})}}},function(e){e.O(0,[713,971,69,744],function(){return e(e.s=9441)}),_N_E=e.O()}]);